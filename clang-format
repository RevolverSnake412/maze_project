#!/bin/bash

# Set the path to clang-format
CLANG_FORMAT_BIN=clang-format

# Set the style options
STYLE_OPTIONS="Language: Cpp
ColumnLimit: 80
SpacesInParentheses: false
BreakBeforeBraces: Allman
AllowShortIfStatementsOnASingleLine: false
UseTab: Always
IndentWidth: 8
TabWidth: 8"

# Create a temporary style file
echo "$STYLE_OPTIONS" >.clang-format-temp

# Find all C and C++ files in the current directory and its subdirectories
FILES=$(find . -type f \( -name "*.c" -o -name "*.cpp" -o -name "*.h" -o -name "*.hpp" \))

# Run clang-format on each file with the temporary style file
for FILE in $FILES; do
	echo "Formatting $FILE..."
	$CLANG_FORMAT_BIN -i -style=file .clang-format-temp $FILE
done

# Remove the temporary style file
rm .clang-format-temp

echo "Formatting complete."
